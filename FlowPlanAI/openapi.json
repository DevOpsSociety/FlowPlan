{
  "openapi": "3.1.0",
  "info": {
    "title": "FlowPlanAI",
    "description": "AI ê¸°ë°˜ WBS(Work Breakdown Structure) ìë™ ìƒì„± API",
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/wbs/generate-spec": {
      "post": {
        "tags": [
          "WBS"
        ],
        "summary": "í”„ë¡œì íŠ¸ ëª…ì„¸ì„œ ìƒì„± (ë§ˆí¬ë‹¤ìš´)",
        "description": "í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ìƒì„¸ ëª…ì„¸ì„œë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n    \n    **ì›Œí¬í”Œë¡œìš°**:\n    1. ì´ APIë¡œ ë§ˆí¬ë‹¤ìš´ ëª…ì„¸ì„œ ìƒì„±\n    2. ì‚¬ìš©ìê°€ ëª…ì„¸ì„œë¥¼ ê²€í† í•˜ê³  ìˆ˜ì •\n    3. `/generate-from-spec` APIë¡œ WBS ìƒì„±\n    \n    ì´ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ ë” ì •í™•í•˜ê³  ìƒì„¸í•œ WBSë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
        "operationId": "generate_markdown_spec_api_v1_wbs_generate_spec_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "allOf": [
                  {
                    "$ref": "#/components/schemas/WBSGenerateRequest"
                  }
                ],
                "examples": {
                  "simple": {
                    "summary": "ê°„ë‹¨í•œ ì˜ˆì‹œ",
                    "value": {
                      "project_name": "ì‹ ê·œ ì•± ê°œë°œ",
                      "project_type": "ëª¨ë°”ì¼ ì•±",
                      "team_size": 5,
                      "expected_duration_days": 30
                    }
                  }
                },
                "title": "Request"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MarkdownSpecResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/wbs/generate-from-spec": {
      "post": {
        "tags": [
          "WBS"
        ],
        "summary": "ë§ˆí¬ë‹¤ìš´ ëª…ì„¸ì„œë¡œë¶€í„° WBS ìƒì„±",
        "description": "ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ í”„ë¡œì íŠ¸ ëª…ì„¸ì„œë¥¼ ë¶„ì„í•˜ì—¬ WBSë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n    \n    **ê¶Œì¥ ì›Œí¬í”Œë¡œìš°**:\n    1. `/generate-spec`ìœ¼ë¡œ ì´ˆê¸° ëª…ì„¸ì„œ ìƒì„±\n    2. ì‚¬ìš©ìê°€ ëª…ì„¸ì„œë¥¼ ìƒì„¸íˆ ìˆ˜ì •\n    3. ì´ APIë¡œ ì •í™•í•œ WBS ìƒì„±\n    \n    ëª…ì„¸ì„œì— ì‘ì„±ëœ ëª¨ë“  ìš”êµ¬ì‚¬í•­, ê¸°ëŠ¥, ì œì•½ì‚¬í•­ì´ WBSì— ë°˜ì˜ë©ë‹ˆë‹¤.",
        "operationId": "generate_wbs_from_spec_api_v1_wbs_generate_from_spec_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WBSFromSpecRequest"
              },
              "example": {
                "markdown_spec": "# í”„ë¡œì íŠ¸ ëª…ì„¸ì„œ: FlowPlan ì•± ê°œë°œ\n\n## í”„ë¡œì íŠ¸ ê°œìš”\n- **í”„ë¡œì íŠ¸ëª…**: FlowPlan ì•±\n- **ê¸°ê°„**: 2024-01-01 ~ 2024-01-30 (30ì¼)\n- **íŒ€ êµ¬ì„±**: 5ëª… (PM 1, ê°œë°œì 3, ë””ìì´ë„ˆ 1)\n\n## í”„ë¡œì íŠ¸ ëª©ì \nì¼ì • ê´€ë¦¬ ë° í˜‘ì—…ì„ ìœ„í•œ ëª¨ë°”ì¼ ì•± ê°œë°œ\n\n## í•µì‹¬ ê¸°ëŠ¥\n### 1. ê°„íŠ¸ì°¨íŠ¸\n- ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ ì¼ì • ì¡°ì •\n- ë§ˆì¼ìŠ¤í†¤ í‘œì‹œ\n\n### 2. WBS ìë™ ìƒì„±\n- AI ê¸°ë°˜ ì‘ì—… ë¶„í•´\n\n### 3. ì¹¸ë°˜ë³´ë“œ\n- ì‘ì—… ìƒíƒœ ê´€ë¦¬\n"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WBSGenerateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/wbs/generate-from-spec/flat": {
      "post": {
        "tags": [
          "WBS"
        ],
        "summary": "ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œë¶€í„° WBS ìƒì„± (Flat êµ¬ì¡° - ìŠ¤í”„ë§ DBìš©)",
        "description": "ë§ˆí¬ë‹¤ìš´ ëª…ì„¸ì„œë¡œë¶€í„° WBSë¥¼ ìƒì„±í•˜ê³ , **ìŠ¤í”„ë§ ì„œë²„ DB ì €ì¥ìš© Flat êµ¬ì¡°**ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n    \n    **ìŠ¤í”„ë§ì—ì„œ ì €ì¥í•˜ëŠ” ë°©ë²•**:\n    ```java\n    // ìˆœì„œëŒ€ë¡œ ì €ì¥í•˜ë©° task_id -> DB id ë§¤í•‘\n    Map<String, Long> taskIdMap = new HashMap<>();\n    \n    for (WBSTaskDto dto : tasks) {\n        Task task = new Task();\n        task.setName(dto.getName());\n        \n        // ë¶€ëª¨ ì‘ì—…ì´ ìˆìœ¼ë©´ ë§¤í•‘ëœ DB id ì„¤ì •\n        if (dto.getParentTaskId() != null) {\n            Long parentDbId = taskIdMap.get(dto.getParentTaskId());\n            task.setParentId(parentDbId);\n        }\n        \n        Task saved = taskRepository.save(task);\n        taskIdMap.put(dto.getTaskId(), saved.getId());\n    }\n    ```\n    \n    **ERD Tasks í…Œì´ë¸” ë§¤í•‘**:\n    - task_id â†’ UI í‘œì‹œìš© (1.0, 1.1, 1.2...)\n    - parent_task_id â†’ ë¶€ëª¨ì˜ task_id (ìŠ¤í”„ë§ì´ DB idë¡œ ë³€í™˜)\n    - name â†’ Tasks.name\n    - assignee â†’ Tasks.assignee_id (ì‚¬ìš©ì ë§¤í•‘ í•„ìš”)\n    - start_date/end_date â†’ Tasks.start_date/end_date\n    - progress â†’ Tasks.progress (í•­ìƒ 0)\n    - status â†’ Tasks.status (í•­ìƒ \"í• ì¼\")",
        "operationId": "generate_wbs_from_spec_flat_api_v1_wbs_generate_from_spec_flat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WBSFromSpecRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "title": "Response Generate Wbs From Spec Flat Api V1 Wbs Generate From Spec Flat Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/wbs/health": {
      "get": {
        "tags": [
          "WBS"
        ],
        "summary": "WBS ì„œë¹„ìŠ¤ í—¬ìŠ¤ì²´í¬",
        "description": "WBS ìƒì„± ì„œë¹„ìŠ¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.",
        "operationId": "health_check_api_v1_wbs_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "ë£¨íŠ¸ ì—”ë“œí¬ì¸íŠ¸",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "MarkdownSpecResponse": {
        "properties": {
          "project_name": {
            "type": "string",
            "title": "Project Name",
            "description": "í”„ë¡œì íŠ¸ëª…"
          },
          "markdown_spec": {
            "type": "string",
            "title": "Markdown Spec",
            "description": "ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ í”„ë¡œì íŠ¸ ëª…ì„¸ì„œ"
          }
        },
        "type": "object",
        "required": [
          "project_name",
          "markdown_spec"
        ],
        "title": "MarkdownSpecResponse",
        "description": "ë§ˆí¬ë‹¤ìš´ í”„ë¡œì íŠ¸ ëª…ì„¸ì„œ ì‘ë‹µ ëª¨ë¸",
        "example": {
          "markdown_spec": "# í”„ë¡œì íŠ¸ ëª…ì„¸ì„œ: FlowPlan ëª¨ë°”ì¼ ì•± ê°œë°œ\n\n## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”\n...",
          "project_name": "FlowPlan ëª¨ë°”ì¼ ì•± ê°œë°œ"
        }
      },
      "Priority": {
        "type": "string",
        "enum": [
          "ë†’ìŒ",
          "ì¤‘ê°„",
          "ë‚®ìŒ"
        ],
        "title": "Priority",
        "description": "ìš°ì„ ìˆœìœ„"
      },
      "ProjectDuration": {
        "properties": {
          "start_date": {
            "type": "string",
            "format": "date",
            "title": "Start Date",
            "description": "ì‹œì‘ì¼"
          },
          "end_date": {
            "type": "string",
            "format": "date",
            "title": "End Date",
            "description": "ì¢…ë£Œì¼"
          }
        },
        "type": "object",
        "required": [
          "start_date",
          "end_date"
        ],
        "title": "ProjectDuration",
        "description": "í”„ë¡œì íŠ¸ ê¸°ê°„"
      },
      "TaskStatus": {
        "type": "string",
        "enum": [
          "í• ì¼",
          "ì§„í–‰ì¤‘",
          "ì™„ë£Œ"
        ],
        "title": "TaskStatus",
        "description": "ì‘ì—… ìƒíƒœ (ERD ê¸°ì¤€)"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WBSFromSpecRequest": {
        "properties": {
          "markdown_spec": {
            "type": "string",
            "title": "Markdown Spec",
            "description": "í”„ë¡œì íŠ¸ ëª…ì„¸ì„œ (ë§ˆí¬ë‹¤ìš´ í˜•ì‹)",
            "example": "# í”„ë¡œì íŠ¸ ëª…ì„¸ì„œ: FlowPlan ì•± ê°œë°œ\n\n## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”\n- **í”„ë¡œì íŠ¸ëª…**: FlowPlan ì•±\n- **ê¸°ê°„**: 2024-01-01 ~ 2024-01-14 (14ì¼)\n- **íŒ€ êµ¬ì„±**: 5ëª…\n\n## ğŸ¯ í”„ë¡œì íŠ¸ ëª©ì \nì¼ì • ê´€ë¦¬ ë„êµ¬ ê°œë°œ\n\n## âœ¨ í•µì‹¬ ê¸°ëŠ¥\n1. ê°„íŠ¸ì°¨íŠ¸\n2. WBS ìë™ ìƒì„±\n3. ì¹¸ë°˜ë³´ë“œ\n"
          }
        },
        "type": "object",
        "required": [
          "markdown_spec"
        ],
        "title": "WBSFromSpecRequest",
        "description": "ë§ˆí¬ë‹¤ìš´ ëª…ì„¸ì„œ ê¸°ë°˜ WBS ìƒì„± ìš”ì²­"
      },
      "WBSGenerateRequest": {
        "properties": {
          "project_name": {
            "type": "string",
            "title": "Project Name",
            "description": "[í•„ìˆ˜] í”„ë¡œì íŠ¸ëª…",
            "example": "FlowPlan ì•± ê°œë°œ"
          },
          "project_type": {
            "type": "string",
            "title": "Project Type",
            "description": "[í•„ìˆ˜] í”„ë¡œì íŠ¸ ì£¼ì œ (ì–´ë–¤ ì¢…ë¥˜ì˜ í”„ë¡œì íŠ¸ì¸ê°€ìš”?)",
            "example": "ëª¨ë°”ì¼ ì•±"
          },
          "team_size": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Team Size",
            "description": "[í•„ìˆ˜] ì°¸ì—¬ ì¸ì› ìˆ˜",
            "example": 5
          },
          "expected_duration_days": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Expected Duration Days",
            "description": "[í•„ìˆ˜] ì˜ˆìƒ ê¸°ê°„(ì¼)",
            "example": 60
          },
          "project_duration": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ProjectDuration"
              },
              {
                "type": "null"
              }
            ],
            "description": "[ì„ íƒ] ì‹œì‘ì¼/ë§ˆê°ì¼ (êµ¬ì²´ì ì¸ ë‚ ì§œ)"
          },
          "budget": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Budget",
            "description": "[ì„ íƒ] ì˜ˆì‚°",
            "example": "5000ë§Œì›"
          },
          "priority": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Priority"
              },
              {
                "type": "null"
              }
            ],
            "description": "[ì„ íƒ] ìš°ì„ ìˆœìœ„ (ë†’ìŒ/ì¤‘ê°„/ë‚®ìŒ)",
            "default": "ì¤‘ê°„"
          },
          "stakeholders": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stakeholders",
            "description": "[ì„ íƒ] ì£¼ìš” ì´í•´ê´€ê³„ì",
            "default": [],
            "example": [
              "CEO",
              "ë§ˆì¼€íŒ…íŒ€"
            ]
          },
          "deliverables": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deliverables",
            "description": "[ì„ íƒ] ì£¼ìš” ì‚°ì¶œë¬¼",
            "default": [],
            "example": [
              "ì•± ì¶œì‹œ",
              "API ë¬¸ì„œ"
            ]
          },
          "risks": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Risks",
            "description": "[ì„ íƒ] ì˜ˆìƒ ë¦¬ìŠ¤í¬",
            "default": [],
            "example": [
              "ì¼ì • ì§€ì—°"
            ]
          },
          "detailed_requirements": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detailed Requirements",
            "description": "[ì„ íƒ] ë” êµ¬ì²´ì ì¸ ìš”êµ¬ì‚¬í•­",
            "example": "ë‹¤í¬ëª¨ë“œ ì§€ì›, ì˜¤í”„ë¼ì¸ ë™ê¸°í™”"
          }
        },
        "type": "object",
        "required": [
          "project_name",
          "project_type",
          "team_size",
          "expected_duration_days"
        ],
        "title": "WBS ìƒì„± ìš”ì²­",
        "description": "í•„ìˆ˜: project_name, project_type, team_size, expected_duration_days"
      },
      "WBSGenerateResponse": {
        "properties": {
          "project_name": {
            "type": "string",
            "title": "Project Name",
            "description": "í”„ë¡œì íŠ¸ëª…"
          },
          "total_tasks": {
            "type": "integer",
            "title": "Total Tasks",
            "description": "ì „ì²´ ì‘ì—… ìˆ˜"
          },
          "total_duration_days": {
            "type": "integer",
            "title": "Total Duration Days",
            "description": "ì „ì²´ ê¸°ê°„(ì¼)"
          },
          "wbs_structure": {
            "items": {
              "$ref": "#/components/schemas/WBSTask"
            },
            "type": "array",
            "title": "Wbs Structure",
            "description": "WBS êµ¬ì¡°"
          }
        },
        "type": "object",
        "required": [
          "project_name",
          "total_tasks",
          "total_duration_days",
          "wbs_structure"
        ],
        "title": "WBSGenerateResponse",
        "description": "WBS ìƒì„± ì‘ë‹µ ëª¨ë¸",
        "example": {
          "project_name": "í”„ë¡œì íŠ¸ ê¸°íš ì‹œì‘í•˜ê¸°",
          "total_duration_days": 21,
          "total_tasks": 12,
          "wbs_structure": [
            {
              "assignee": "PM",
              "dependencies": [],
              "duration_days": 21,
              "end_date": "2024-01-21",
              "progress": 85,
              "start_date": "2024-01-01",
              "status": "ì§„í–‰ ì¤‘",
              "subtasks": [],
              "task_id": "1.0",
              "task_name": "í”„ë¡œì íŠ¸ ê¸°íš"
            }
          ]
        }
      },
      "WBSTask": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id",
            "description": "ì‘ì—… ID (ê³„ì¸µ êµ¬ì¡°)",
            "example": "1.1"
          },
          "parent_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Id",
            "description": "ìƒìœ„ ì‘ì—… ID (1.0ì˜ í•˜ìœ„ëŠ” parent_id='1.0')",
            "example": "1.0"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "ì‘ì—…ëª…",
            "example": "ìš”êµ¬ì‚¬í•­ ë¶„ì„"
          },
          "assignee": {
            "type": "string",
            "title": "Assignee",
            "description": "ë‹´ë‹¹ì (assignee_id ë§¤í•‘ í•„ìš”)",
            "example": "PM"
          },
          "start_date": {
            "type": "string",
            "format": "date",
            "title": "Start Date",
            "description": "ì‹œì‘ì¼"
          },
          "end_date": {
            "type": "string",
            "format": "date",
            "title": "End Date",
            "description": "ì¢…ë£Œì¼"
          },
          "duration_days": {
            "type": "integer",
            "title": "Duration Days",
            "description": "ê¸°ê°„(ì¼)",
            "example": 7
          },
          "progress": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Progress",
            "description": "ì§„í–‰ë¥ (%) - ê¸°ë³¸ê°’ 0",
            "default": 0
          },
          "status": {
            "allOf": [
              {
                "$ref": "#/components/schemas/TaskStatus"
              }
            ],
            "description": "ìƒíƒœ - ê¸°ë³¸ê°’ 'í• ì¼'",
            "default": "í• ì¼"
          },
          "subtasks": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/WBSTask"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subtasks",
            "description": "í•˜ìœ„ ì‘ì—… (flat êµ¬ì¡° ë³€í™˜ ê°€ëŠ¥)",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "name",
          "assignee",
          "start_date",
          "end_date",
          "duration_days"
        ],
        "title": "WBSTask",
        "description": "WBS ì‘ì—… í•­ëª© (ìŠ¤í”„ë§ ì„œë²„ ERD í˜¸í™˜)"
      }
    }
  }
}